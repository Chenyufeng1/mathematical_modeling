%计算第6问的区域11的巡逻方案，走分支
clc;
clear;
path=[84 116 123 141 123 116 84];%巡逻路径
x=[14418;11664;8118;9162;9630;7398;4716;6750;1602;3528;5616;2502;8118;1566;...
    9144;9594;10332;7452;6534;5598;11574;6750;8064;10296;9162;2484;4644;6480;...
    7380;3510;5022;1458;2106;5616;14544;1404;13302;2268;14040;14418;8460;8100;...
    1314;9180;11376;2772;8478;9810;10242;6732;7380;8118;5040;5580;5238;6372;4518;...
    4158;3888;3726;9846;3096;10242;5238;4104;1692;1224;4626;4104;4554;1728;5094;3042;...
    4500;5058;4914;13050;9846;13266;4194;11142;3474;7434;9162;9972;10458;5616;8118;...
    3042;5274;6372;1080;4050;1548;2394;4716;2196;4932;5292;4104;5130;2160;4986;4662;...
    5508;5634;6408;7398;1566;5274;990;4968;2124;6390;8082;9162;7398;5562;5346;5886;...
    4986;10008;9198;4590;5598;5994;5472;900;5004;1278;2088;4140;5292;5832;4338;9954;...
    10422;8046;7416;6390;9180;5508;5616;5922;6678;6030;6984;9882;7452;6642;8316;6408;...
    5868;7020;6840;5580;810;1242;3114;4140;4644;5166;6174;6552;7722;8262;1962;8802;7506;...
    10152;7110;6840;7830;3186;4932;3438;3852;4104;5166;3312;4356;4644;5580;7110;7308;...
    3168;3474;4950;5148;4500;4140;7848;630;7452;3456;5364;8352;3132;3798;4626;5976;6768;...
    8118;4518;5166;5544;6516;4104;5058;7812;1818;4104;7308;7128;9162;6696;3456;3132;4608;...
    8118;5022;6516;7074;6858;7740;9180;8082;10188;5004;6282;3114;3456;4590;4104;11970;11376;...
    13068;7434;6336;7740;8262;9198;5526;6840;3294;3474;4122;4590;6012;6156;11304;6282;11952;...
    5148;432;3294;13050;4086;3096;1674;8298;5184;5508;6030;7452;7722;5058;6840;6120;1638;5652;...
    9198;5976;6390;306;4068;7452;6624;6876;8262;4986;6066;6408;5616;7416;6894;1854;5796;2178;6768;...
    3960;5832;6624;7416;11880;12978;216;3798;8262;5832;6516;6642;7434;8748;10872;11880;12960;];
y=[8046;8010;7974;7992;7992;7956;7956;7956;7938;7902;7920;7902;7668;7650;7650;7650;7650;7596;...
    7290;7254;7164;7146;7146;7182;7146;7110;7110;7128;7128;7110;7110;7092;7074;7110;7020;6984;...
    6984;6858;6840;6840;6642;6606;6480;6318;6318;6282;6300;6300;6318;6282;6264;6282;6264;6246;...
    6210;6210;6192;6084;6066;6012;5976;5958;5922;5886;5868;5832;5814;5814;5688;5634;5652;5634;...
    5508;5508;5454;5346;5346;5292;5292;5238;5274;5238;5256;5256;5256;5238;5220;5220;5220;5202;...
    5220;5202;5202;5184;5184;5184;5166;5184;5058;5004;4968;4950;4896;4878;4878;4860;4860;4842;...
    4788;4788;4752;4680;4662;4662;4662;4662;4662;4608;4572;4554;4572;4446;4392;4356;4356;4356;...
    4356;4338;4302;4266;4266;4284;4284;4284;4248;4230;4230;4104;4104;4086;4086;4068;4050;4050;...
    4050;4050;4050;4032;3888;3852;3888;3852;3834;3852;3726;3780;3762;3744;3762;3744;3762;3780;...
    3726;3690;3636;3654;3636;3618;3618;3618;3582;3546;3528;3366;3348;3330;3330;3348;3330;3348;...
    3348;3330;3312;3276;3186;3186;3186;3186;3168;3150;3132;3132;3024;2988;2988;2952;2970;2916;...
    2952;2934;2952;2952;2952;2934;2934;2916;2934;2916;2916;2898;2898;2808;2844;2844;2790;2754;...
    2808;2772;2736;2736;2736;2718;2718;2664;2628;2664;2628;2628;2556;2538;2502;2502;2502;2484;...
    2466;2448;2430;2376;2358;2340;2358;2340;2340;2322;2250;2250;2250;2250;2214;2142;2160;2142;...
    2142;2124;2106;2070;2088;2070;2070;2016;1908;1908;1908;1890;1908;1890;1800;1728;1710;1656;...
    1548;1494;1476;1404;1386;1386;1368;1332;1350;1314;1260;1278;1278;1278;1116;1062;1008;936;...
    864;756;738;738;738;720;702;684;414;360;288;288;288;270;270;252;216;198;162;];
num=[1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;...
    33;34;35;36;37;38;39;40;41;42;43;44;45;46;47;48;49;50;51;52;53;54;55;56;57;58;59;60;61;...
    62;63;64;65;66;67;68;69;70;71;72;73;74;75;76;77;78;79;80;81;82;83;84;85;86;87;88;89;90;...
    91;92;93;94;95;96;97;98;99;100;101;102;103;104;105;106;107;108;109;110;111;112;113;114;...
    115;116;117;118;119;120;121;122;123;124;125;126;127;128;129;130;131;132;133;134;135;136;...
    137;138;139;140;141;142;143;144;145;146;147;148;149;150;151;152;153;154;155;156;157;158;...
    159;160;161;162;163;164;165;166;167;168;169;170;171;172;173;174;175;176;177;178;179;180;...
    181;182;183;184;185;186;187;188;189;190;191;192;193;194;195;196;197;198;199;200;201;202;...
    203;204;205;206;207;208;209;210;211;212;213;214;215;216;217;218;219;220;221;222;223;224;...
    225;226;227;228;229;230;231;232;233;234;235;236;237;238;239;240;241;242;243;244;245;246;...
    247;248;249;250;251;252;253;254;255;256;257;258;259;260;261;262;263;264;265;266;267;268;...
    269;270;271;272;273;274;275;276;277;278;279;280;281;282;283;284;285;286;287;288;289;290;...
    291;292;293;294;295;296;297;298;299;300;301;302;303;304;305;306;307;];%计算整个巡逻路径的长度
for i=1:307
    for j=1:307
        a=(x(i)-x(j))*(x(i)-x(j));
        b=(y(i)-y(j))*(y(i)-y(j));
        D(i,j)=sqrt(a+b);
    end
end
%求巡逻一个来回的总路程
L=0;
for i=1:length(path)-1
    a=path(i);b=path(i+1);
    L=L+D(a,b);        
end
tt=L/333.3; %巡逻一个来回的时间

%t=33;           %时刻值  
for f=0:239
t=mod(f,tt);    %对总时间取余
sa=t*333.3;
sum=0;
lable=1;
for i=1:length(path)-1;
    a=path(i);b=path(i+1);
    sum=sum+D(a,b);
    if (sum>sa)
        label=i;
        break;
    end
end
a=path(label);
b=path(label+1);
sum=sum-D(a,b);   %距离上一个节点的距离
a=path(label);
b=path(label+1);
xa=x(a);      %上一点横左边
xb=x(b);  %下一点横坐标
ya=y(a);    %上一点纵坐标
yb=y(b);  %下一点纵坐标


t2=t-sum/333.3;     %
d=D(path(label),path(label+1)); %两点之间的距离
if xb~=xa
    th=atan((yb-ya)/(xb-xa));   %求角度
elseif yb>ya
    th=pi/2;
else
    th=-pi/2;
end
if xa<=xb
        xpot(f+1)=xa+t2*333.3*cos(th);   %求横坐标
        ypot(f+1)=ya+t2*333.3*sin(th);   %求纵坐标
    else
        xpot(f+1)=xa-t2*333.3*cos(th);
        ypot(f+1)=ya-t2*333.3*sin(th);
    end
end
format long g;
xpot=xpot'
ypot=ypot'